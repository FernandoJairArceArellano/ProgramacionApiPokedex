<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultra.net.nz/thyemeleaf/layout"
    layout:decorate=~{layout}>

<head>
    <title>Pokédex</title>
    <script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-core.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-radar.min.js"></script>

    <style type="text/css">
        html,
        body,
        #container {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body layout:fragment="body">
    <div class="container mt-5">
        <a href="/pokedex/todos" class="btn btn-secondary mb-3">← Volver a la Pokédex</a>

        <div class="card shadow-sm">
            <div class="card-body text-center">
                <h2 class="text-capitalize" th:text="${pokemon.name}">Nombre</h2>
                <div class="container">
                    <div class="row row-cols-2">
                        <div class="row justify-content-center">
                            <span>Forma natural</span>
                            <img class="pokemon-img mb-3" th:src="${pokemon.sprites.frontDefault}"
                                alt="Imagen Pokémon por deafault">
                        </div>
                        <div class="row justify-content-center">
                            <span>Forma Shiny</span>
                            <img class="pokemon-img mb-3" th:src="${pokemon.sprites.frontShiny}"
                                alt="Imagen Pokémon Shiny">
                        </div>
                    </div>
                </div>

                <!-- Animacion del pokemon -->
                <div class="container">
                    <div class="row row-cols-2">
                        <div class="row justify-content-center">
                            <span>Forma natural</span>
                            <img class="pokemon-shiny-img mb-3" th:src="${pokemon.sprites.other.showdown.frontDefault}"
                                alt="Imagen Pokémon por deafault">
                        </div>
                        <div class="row justify-content-center">
                            <span>Forma Shiny</span>
                            <img class="pokemon-shiny-img mb-3" th:src="${pokemon.sprites.other.showdown.frontShiny}"
                                alt="Imagen Pokémon Shiny">
                        </div>
                    </div>
                </div>
                <h5 class="text-muted">#<span th:text="${pokemon.id}">001</span></h5>

                <img th:if="${isDefault == false}"
                    src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Pok%C3%A9_Ball_icon.svg/512px-Pok%C3%A9_Ball_icon.svg.png"
                    alt="Es inicial" width="50px" height="50px">

                <div class="mt-3">
                    <h4>Experiencia por victoria
                        <span th:text="${pokemon.baseExperience}"></span>
                    </h4>

                    <!-- Tipos del pokemon -->
                    <span th:text="${pokemon.types.size() > 1 ? 'Tipos:' : 'Tipo:'}"></span>
                    <br><br>
                    <!-- <span th:each="t : ${pokemon.types}" class="badge bg-primary type-badge"
                        th:text="${t.type.name}">tipo</span> -->

                    <span th:each="typeSlot : ${pokemon.types}" class="badge bg-secondary me-1">
                        <img th:src="${typeSlot.typeIconUrl}" style="height: 20px;" alt="icono tipo" />
                    </span>
                </div>
            </div>
        </div>
    </div>

    <!-- Estadisticas -->
    <!-- <div class="container mt-5">
        <div class="card shadow-sm">
            <div class="card-body text-center">
                <div class="container">
                    Todas las estadisticas del pokemon
                </div>
            </div>
        </div>
    </div> -->

    <div class="container">
    </div>
    <div id="container" style="width: 500px; height: 400px; margin-top: 3rem !important;">
    </div>
    <script>

        anychart.onDocumentReady(function () {

            // create a data set
            var chartData = {
                header: ['#', 'Estadisticas del pokemon'],
                rows: [
                    ['hp', 45],
                    ['attack', 49],
                    ['defense', 49],
                    ['special-attack', 65],
                    ['special-defense', 65],
                    ['speed', 45]
                ]
            };

            // create a radar chart
            var chart = anychart.radar();

            // set the series type
            chart.defaultSeriesType('area');

            // set the chart data
            chart.data(chartData);

            // set the color palette
            chart.palette(['#9BC53DE6', '#E5593499', '#64B5F6BF']);

            // configure the appearance of the y-axis
            chart.yAxis().stroke('#545f69');
            chart.yAxis().ticks().stroke('#545f69');

            // configure the stroke of the x-grid
            chart.xGrid().stroke({
                color: "#545f69",
                thickness: 0.5,
                dash: "10 5"
            });

            // configure the appearance of the y-grid
            chart.yGrid().palette(['gray 0.05', 'gray 0.025']);

            // begin the y-scale at 0
            chart.yScale().minimum(0);

            // set the y-scale ticks interval
            chart.yScale().ticks().interval(10);

            // set the hover mode
            chart.interactivity().hoverMode('by-x');

            //  set the marker type
            chart.markerPalette(['star5']);

            // improve the tooltip
            chart.tooltip()
                .displayMode('union')
                .useHtml(true)
                .format(function (e) {
                    console.log(this);
                    return '<span style="color:' + this.series.color() + '">' +
                        this.seriesName + ": " + this.value + "</span>"
                });

            // set chart legend settings
            chart.legend()
                .align('center')
                .position('center-bottom')
                .enabled(true);

            // set the chart title
            chart.title("Estadisticas base");

            // set container id for the chart
            chart.container('container');

            // initiate chart drawing
            chart.draw();

        });

    </script>

    <!-- Evoluciones reales -->
    <div class="container mt-5">
        <h1>Evoluciones</h1>
        <div class="row row-cols-2 row-cols-lg-5 g-2">
            <div class="col" th:each="evolucion : ${evoluciones}">
                <div class="card shadow-sm">
                    <div class="card-body text-center">
                        <h2 class="text-capitalize" th:text="${evolucion.nombre}">Nombre</h2>
                        <div class="row justify-content-center">
                            <img class="pokemon-img mb-3" th:src="${evolucion.imagen}" alt="Imagen evolución" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mega evolucones -->
    <div class="container mt-5">
        <h1>Mega evoluciones</h1>
        <div class="row row-cols-2 row-cols-lg-5 g-2">
            <div class="col">
                <div class="card shadow-sm">
                    <div class="card-body text-center">
                        <h2 class="text-capitalize">Mega evolucion</h2>
                        <div class="row justify-content-center">
                            <span>Forma natural</span>
                            <img class="pokemon-img mb-3" th:src="${pokemon.sprites.frontDefault}"
                                alt="Imagen Pokémon por deafault">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <style>
        .pokemon-img {
            width: 300px;
            height: 300px;
            object-fit: contain;
        }

        .pokemon-shiny-img {
            width: 200px;
            height: 200px;
            object-fit: contain;
        }

        .type-badge {
            margin: 0 5px;
            text-transform: capitalize;
        }
    </style>
</body>

</html>